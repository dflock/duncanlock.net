= Setting up the venv

This site is using https://docs.getpelican.com/[Pelican] & and python venv.

To set up or recreate the venv:

[source,console]
----
$ rm -rf ~/venv/duncanlock.net-venv
$ python3 -m venv ~/venv/duncanlock.net-venv
$ source ~/venv/duncanlock.net-venv/bin/activate
$ pip --version
$ python --version
----

To install dependencies into the venv:

[source,console]
----
$ python -m pip install -r requirements.txt
----

To run the dev server:

[source,console]
----
$ invoke livereload
----

To run a static debug build:

[source,console]
----
$ rm -f ./cache/* && pelican --delete-output-directory --debug &> ~/tmp/pelican-debug-output.log
----

To publish the site to s3:

[source,console]
----
$ rm -rf ./published_output
$ make publish
# have a look at the /published_output, then:
$ make s3_upload
----

or to just do it in one go:

[source,console]
----
$ rm -rf ./published_output && make s3_upload
----
